import{j as e,B as r,C as g,h as t,a9 as i,a3 as a,O,aS as z,aT as H,ad as E}from"./mui-vendor-DlldRxor.js";import{a as B}from"./react-vendor-C0s_J9t-.js";import{M as j}from"./MobileAppShell-dHUJWRrR.js";import{i as F,j as n,z as M,A as y,B as b,C as v,D as C,E as D}from"./index-D4QRAU_W.js";import{u as U}from"./usePullToRefresh-C2FNOxJ5.js";import{P as q,I as G,R as V,T as J}from"./dashboard.page-DdcYcI6y.js";import"./redux-vendor-tKFe_QvA.js";import"./firebase-vendor-40dJGoDN.js";import"./utils-vendor-CFocuF-S.js";import"./pdf-vendor-DisdNAgy.js";import"./transactionAnalysis.service-DrepQx6p.js";import"./pdfStorageService-DGuhzLre.js";import"./formatDistanceToNow-Df0H9vuf.js";import"./endOfMonth-CxaODxht.js";import"./generateCategoricalChart-B6_j-LNJ.js";import"./PieChart-oV72AkmV.js";const ce=()=>{const s=F(),{items:c,loading:I}=n(o=>o.products),{items:x}=n(o=>o.orders),{items:p,loading:P}=n(o=>o.transactions),{items:R,loading:S}=n(o=>o.categories),h=n(M),{state:w,containerRef:k}=U(async()=>{await Promise.all([s(y({})).unwrap(),s(b()).unwrap(),s(v()).unwrap(),s(C()).unwrap(),s(D()).unwrap()])},{threshold:80,enabled:!0});B.useEffect(()=>{h&&(s(y({})),s(b()),s(v()),s(C()),s(D()))},[s,h]);const d=x.length,A=c.length,m=x.reduce((o,u)=>{var f;const W=((f=u.product)==null?void 0:f.sellingPrice)||0,L=parseInt(u.quantity)||0;return o+W*L},0),T=d>0?m/d:0,l=I||P||S;return l?e.jsx(j,{pageTitle:"Dashboard",children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:e.jsx(g,{})})}):e.jsx(j,{pageTitle:"Dashboard",children:e.jsxs(r,{ref:k,sx:{display:"flex",flexDirection:"column",flex:1,overflow:"auto",backgroundColor:"background.default",width:"100%"},children:[w.isRefreshing&&e.jsx(r,{sx:{display:"flex",justifyContent:"center",p:2},children:e.jsx(g,{size:24})}),e.jsxs(r,{sx:{p:2},children:[e.jsx(r,{sx:{mb:2},children:e.jsx(t,{variant:"caption",color:"text.secondary",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),e.jsxs(i,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(i,{item:!0,xs:6,children:e.jsx(a,{sx:{p:2,borderRadius:2,borderLeft:"4px solid",borderColor:"primary.main",minHeight:120},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(O,{sx:{fontSize:28,color:"primary.main"}}),e.jsx(t,{variant:"h5",sx:{fontWeight:"bold",color:"primary.dark"},children:d}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Orders"})]})})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(a,{sx:{p:2,borderRadius:2,borderLeft:"4px solid",borderColor:"success.main",minHeight:120},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(z,{sx:{fontSize:28,color:"success.main"}}),e.jsxs(t,{variant:"h6",sx:{fontWeight:"bold",color:"success.dark"},children:["₹",(m/1e3).toFixed(1),"k"]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Revenue"})]})})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(a,{sx:{p:2,borderRadius:2,borderLeft:"4px solid",borderColor:"info.main",minHeight:120},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(H,{sx:{fontSize:28,color:"info.main"}}),e.jsx(t,{variant:"h5",sx:{fontWeight:"bold",color:"info.dark"},children:A}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Products"})]})})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(a,{sx:{p:2,borderRadius:2,borderLeft:"4px solid",borderColor:"secondary.main",minHeight:120},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(E,{sx:{fontSize:28,color:"secondary.main"}}),e.jsxs(t,{variant:"h6",sx:{fontWeight:"bold",color:"secondary.dark"},children:["₹",(T/1e3).toFixed(1),"k"]}),e.jsx(t,{variant:"caption",color:"text.secondary",children:"Avg Order"})]})})})]}),e.jsx(r,{sx:{mb:2},children:e.jsx(q,{transactions:p,products:c,loading:l})}),e.jsx(r,{sx:{mb:2},children:e.jsx(G,{maxAlertsInWidget:3})}),e.jsx(r,{sx:{mb:2},children:e.jsx(V,{maxItems:3})}),e.jsx(r,{sx:{mb:2},children:e.jsx(J,{transactions:p,products:c,categories:R,loading:l,maxCategories:3})})]})]})})};export{ce as MobileDashboardPage,ce as default};
