const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-CffeN1bZ.js","assets/index-D4QRAU_W.js","assets/mui-vendor-DlldRxor.js","assets/react-vendor-C0s_J9t-.js","assets/redux-vendor-tKFe_QvA.js","assets/firebase-vendor-40dJGoDN.js","assets/utils-vendor-CFocuF-S.js","assets/pdf-vendor-DisdNAgy.js"])))=>i.map(i=>d[i]);
import{j as i,B as a,I as E,a as L,h as x,k as W,A as y,cm as z,cn as X,C as Q}from"./mui-vendor-DlldRxor.js";import{a as e}from"./react-vendor-C0s_J9t-.js";import{_ as Z}from"./pdf-vendor-DisdNAgy.js";import{bg as J,an as Y}from"./index-D4QRAU_W.js";var s;(function(t){t.Aztec="AZTEC",t.Codabar="CODABAR",t.Code39="CODE_39",t.Code93="CODE_93",t.Code128="CODE_128",t.DataMatrix="DATA_MATRIX",t.Ean8="EAN_8",t.Ean13="EAN_13",t.Itf="ITF",t.Pdf417="PDF_417",t.QrCode="QR_CODE",t.UpcA="UPC_A",t.UpcE="UPC_E"})(s||(s={}));var j;(function(t){t.CalendarEvent="CALENDAR_EVENT",t.ContactInfo="CONTACT_INFO",t.DriversLicense="DRIVERS_LICENSE",t.Email="EMAIL",t.Geo="GEO",t.Isbn="ISBN",t.Phone="PHONE",t.Product="PRODUCT",t.Sms="SMS",t.Text="TEXT",t.Url="URL",t.Wifi="WIFI",t.Unknown="UNKNOWN"})(j||(j={}));var I;(function(t){t[t["640x480"]=0]="640x480",t[t["1280x720"]=1]="1280x720",t[t["1920x1080"]=2]="1920x1080",t[t["3840x2160"]=3]="3840x2160"})(I||(I={}));var P;(function(t){t.Front="FRONT",t.Back="BACK"})(P||(P={}));var _;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.PENDING=1]="PENDING",t[t.DOWNLOADING=2]="DOWNLOADING",t[t.CANCELED=3]="CANCELED",t[t.COMPLETED=4]="COMPLETED",t[t.FAILED=5]="FAILED",t[t.INSTALLING=6]="INSTALLING",t[t.DOWNLOAD_PAUSED=7]="DOWNLOAD_PAUSED"})(_||(_={}));var U;(function(t){t[t.HOME=0]="HOME",t[t.UNKNOWN=1]="UNKNOWN",t[t.WORK=2]="WORK"})(U||(U={}));var k;(function(t){t[t.HOME=0]="HOME",t[t.UNKNOWN=1]="UNKNOWN",t[t.WORK=2]="WORK"})(k||(k={}));var K;(function(t){t[t.FAX=0]="FAX",t[t.HOME=1]="HOME",t[t.MOBILE=2]="MOBILE",t[t.UNKNOWN=3]="UNKNOWN",t[t.WORK=4]="WORK"})(K||(K={}));var R;(function(t){t[t.OPEN=1]="OPEN",t[t.WEP=2]="WEP",t[t.WPA=3]="WPA"})(R||(R={}));const o=J("BarcodeScanner",{web:()=>Z(()=>import("./web-CffeN1bZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(t=>new t.BarcodeScannerWeb)}),B=({onScan:t,onClose:C,isActive:f,formats:H=[s.Ean13,s.Ean8,s.UpcA,s.UpcE,s.Code128,s.Code39,s.QrCode],instructions:q="Position barcode within the frame"})=>{const[N,d]=e.useState(null),[b,g]=e.useState(!1),[l,O]=e.useState(!1),[v,c]=e.useState(null),[h,p]=e.useState(""),[m,M]=e.useState(!1);e.useEffect(()=>{M(Y.isNativePlatform())},[]),e.useEffect(()=>((async()=>{if(!(!f||!m))try{const r=await o.checkPermissions();r.camera==="granted"?(d(!0),A()):r.camera==="denied"?(d(!1),c("Camera permission denied. Please enable in Settings.")):(await o.requestPermissions()).camera==="granted"?(d(!0),A()):(d(!1),c("Camera permission is required to scan barcodes."))}catch(r){c(r instanceof Error?r.message:"Failed to request camera permission"),d(!1)}})(),()=>{b&&u()}),[f,m,b]);const A=async()=>{try{g(!0),c(null),await o.addListener("barcodesScanned",async n=>{if(n.barcodes&&n.barcodes.length>0){const r=n.barcodes[0];await u(),t(r.rawValue||"",r.format||"UNKNOWN")}}),await o.startScan({formats:H}),document.body.classList.add("barcode-scanner-active")}catch(n){c(n instanceof Error?n.message:"Failed to start scanning"),g(!1)}},u=async()=>{try{await o.stopScan(),await o.removeAllListeners(),document.body.classList.remove("barcode-scanner-active"),g(!1),O(!1)}catch(n){console.error("Error stopping scanner:",n)}},S=async()=>{try{await o.toggleTorch(),O(!l)}catch{c("Failed to toggle flashlight")}},D=()=>{h.trim()&&(t(h.trim(),"MANUAL"),p(""),C())},w=async()=>{b&&await u(),C()};return f?m?i.jsxs(a,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",flexDirection:"column"},children:[i.jsxs(a,{sx:{position:"absolute",top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.7)",p:2,display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:1},children:[i.jsx(x,{variant:"h6",color:"white",children:"Scan Barcode"}),i.jsx(E,{onClick:w,"aria-label":"Close scanner",sx:{color:"white",minWidth:44,minHeight:44},children:i.jsx(L,{})})]}),i.jsx(a,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:i.jsx(a,{sx:{width:280,height:200,border:"2px solid white",borderRadius:2,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)",position:"relative"},children:[{top:-2,left:-2},{top:-2,right:-2},{bottom:-2,left:-2},{bottom:-2,right:-2}].map((n,r)=>i.jsx(a,{sx:{position:"absolute",width:20,height:20,borderColor:"primary.main",borderWidth:4,borderStyle:"solid",...n,...n.top!==void 0&&n.left!==void 0&&{borderBottom:"none",borderRight:"none"},...n.top!==void 0&&n.right!==void 0&&{borderBottom:"none",borderLeft:"none"},...n.bottom!==void 0&&n.left!==void 0&&{borderTop:"none",borderRight:"none"},...n.bottom!==void 0&&n.right!==void 0&&{borderTop:"none",borderLeft:"none"}}},r))})}),i.jsxs(a,{sx:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.7)",p:3,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[i.jsx(x,{variant:"body2",color:"white",textAlign:"center",children:q}),v&&i.jsx(y,{severity:"error",sx:{width:"100%",maxWidth:400},children:v}),N===!1&&i.jsx(W,{variant:"contained",onClick:()=>window.open("app-settings:","_system"),sx:{minHeight:44},children:"Open Settings"}),b&&N&&i.jsx(E,{onClick:S,"aria-label":l?"Turn off flash":"Turn on flash",sx:{color:"white",backgroundColor:l?"primary.main":"rgba(255,255,255,0.2)",minWidth:56,minHeight:56,"&:hover":{backgroundColor:l?"primary.dark":"rgba(255,255,255,0.3)"}},children:l?i.jsx(z,{}):i.jsx(X,{})}),N===null&&i.jsx(Q,{sx:{color:"white"}})]}),i.jsx("style",{children:`
          body.barcode-scanner-active {
            background: transparent !important;
          }
          body.barcode-scanner-active ion-app,
          body.barcode-scanner-active #root {
            background: transparent !important;
          }
        `})]}):i.jsxs(a,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:3},children:[i.jsx(E,{onClick:w,"aria-label":"Close scanner",sx:{position:"absolute",top:16,right:16,color:"white",minWidth:44,minHeight:44},children:i.jsx(L,{})}),i.jsx(x,{variant:"h6",color:"white",gutterBottom:!0,children:"Enter Barcode Manually"}),i.jsx(x,{variant:"body2",color:"rgba(255,255,255,0.7)",sx:{mb:3},children:"Barcode scanning is only available on mobile devices"}),i.jsx("input",{type:"text",value:h,onChange:n=>p(n.target.value),onKeyPress:n=>n.key==="Enter"&&D(),placeholder:"Enter barcode number",autoFocus:!0,style:{width:"100%",maxWidth:300,padding:"12px 16px",fontSize:"16px",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.1)",color:"white",marginBottom:16}}),i.jsx(W,{variant:"contained",onClick:D,disabled:!h.trim(),sx:{minWidth:120,minHeight:44},children:"Submit"})]}):null};export{j as B,P as L,B as M};
