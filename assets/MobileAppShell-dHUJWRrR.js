import{j as e,a3 as O,cp as H,cq as z,aq as N,by as A,O as T,aT as W,G as M,cr as G,e as R,f as U,I as $,bf as E,M as q,h as j,B as u,P as F,bA as J,a as _,D as b,p as I,r as w,l as C,n as S,o as k,L as K,t as Q,J as V,ab as X,N as Y}from"./mui-vendor-DlldRxor.js";import{i as v,u as P,b as y,a as Z}from"./react-vendor-C0s_J9t-.js";import{bi as L,aO as D,j as ee,i as oe,bj as te}from"./index-D4QRAU_W.js";const re=()=>{const p=v(),s=P(),d=L(),i=[{id:"home",label:"Home",icon:e.jsx(A,{}),route:"/",disabled:!1},{id:"orders",label:"Orders",icon:e.jsx(T,{}),route:`${d}/todays-orders`,disabled:!1},{id:"products",label:"Products",icon:e.jsx(W,{}),route:`${d}/products/`,disabled:!1},{id:"categories",label:"Categories",icon:e.jsx(M,{}),route:`${d}/categories/`,disabled:!1},{id:"inventory",label:"Inventory",icon:e.jsx(G,{}),route:`${d}/inventory`,disabled:!1}],x=()=>{const t=s.pathname,l=i.findIndex(o=>t===o.route||t===o.route.replace(/\/$/,""));if(l>=0)return l;const c=[...i].sort((o,a)=>a.route.length-o.route.length);for(let o=0;o<c.length;o++){const a=c[o];if(t.startsWith(a.route)||t.startsWith(a.route.replace(/\/$/,"")))return i.findIndex(m=>m.id===a.id)}return 0},[n,r]=y.useState(x());y.useEffect(()=>{const t=s.pathname,l=i.findIndex(o=>t===o.route||t===o.route.replace(/\/$/,""));if(l>=0){r(l);return}const c=[...i].sort((o,a)=>a.route.length-o.route.length);for(let o=0;o<c.length;o++){const a=c[o];if(t.startsWith(a.route)||t.startsWith(a.route.replace(/\/$/,""))){const m=i.findIndex(f=>f.id===a.id);r(m);return}}r(0)},[s.pathname,i]);const g=(t,l)=>{r(l);const c=i[l];c&&!c.disabled&&p(c.route)},h=D();return e.jsx(O,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1100,paddingBottom:h.bottom,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:3,children:e.jsx(H,{value:n,onChange:g,showLabels:!0,sx:{height:64,"& .MuiBottomNavigationAction-root":{minWidth:80,maxWidth:168,padding:"6px 12px 8px","&.Mui-selected":{paddingTop:"6px"}},"& .MuiBottomNavigationAction-label":{fontSize:"0.75rem",marginTop:"4px","&.Mui-selected":{fontSize:"0.75rem"}},"& .MuiSvgIcon-root":{fontSize:"1.5rem"}},children:i.map(t=>e.jsx(z,{label:t.label,icon:t.badge&&t.badge>0?e.jsx(N,{badgeContent:t.badge,color:"error",children:t.icon}):t.icon,disabled:t.disabled,sx:{minHeight:44,"& .MuiTouchRipple-root":{color:"primary.main"}}},t.id))})})},ae=({title:p,showBackButton:s=!1,onMenuClick:d,onBackClick:i,actions:x,hidden:n=!1})=>{const r=D();return n?null:e.jsx(R,{position:"sticky",elevation:2,color:"primary",sx:{top:0,zIndex:1200,paddingTop:r.top},children:e.jsxs(U,{sx:{minHeight:56,paddingLeft:1,paddingRight:1},children:[e.jsx($,{edge:"start",color:"inherit","aria-label":s?"go back":"open menu",onClick:s?i:d,sx:{mr:1,minWidth:44,minHeight:44},children:s?e.jsx(E,{}):e.jsx(q,{})}),e.jsx(j,{variant:"h6",component:"h1",sx:{flexGrow:1,fontWeight:600,fontSize:"1.125rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p}),x&&e.jsx(u,{sx:{display:"flex",gap:.5,ml:1},children:x})]})})},se=({open:p,onClose:s,onLogout:d})=>{var c;const i=v(),x=P(),n=L(),r=ee(o=>{var a;return(a=o.auth)==null?void 0:a.user}),g=[{id:"dashboard",label:"Dashboard",icon:e.jsx(Q,{}),route:`${n}/dashboard`},{id:"home",label:"PDF Upload",icon:e.jsx(A,{}),route:`${n}/home`},{id:"orders",label:"Today's Orders",icon:e.jsx(T,{}),route:`${n}/todays-orders`,dividerAfter:!0},{id:"products",label:"Products",icon:e.jsx(W,{}),route:`${n}/products`},{id:"categories",label:"Categories",icon:e.jsx(M,{}),route:`${n}/categories`},{id:"categoryGroups",label:"Category Groups",icon:e.jsx(V,{}),route:`${n}/category-groups`,dividerAfter:!0},{id:"analytics",label:"Order Analytics",icon:e.jsx(X,{}),route:`${n}/order-analytics`},{id:"storage",label:"Storage",icon:e.jsx(Y,{}),route:`${n}/storage-management`}],h=o=>{i(o),s()},t=()=>{s(),d&&d()},l=o=>x.pathname===o||x.pathname.startsWith(o+"/");return e.jsxs(F,{anchor:"left",open:p,onClose:s,sx:{"& .MuiDrawer-paper":{width:280,maxWidth:"80vw",backgroundColor:"background.default"}},PaperProps:{elevation:8},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,backgroundColor:"primary.main",color:"primary.contrastText",minHeight:80},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:2,flex:1},children:[e.jsx(J,{sx:{width:48,height:48,bgcolor:"primary.dark",fontSize:"1.25rem",fontWeight:600},children:((c=r==null?void 0:r.email)==null?void 0:c.charAt(0).toUpperCase())||"U"}),e.jsxs(u,{sx:{flex:1,overflow:"hidden"},children:[e.jsx(j,{variant:"subtitle1",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(r==null?void 0:r.displayName)||"User"}),e.jsx(j,{variant:"caption",sx:{opacity:.9,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:(r==null?void 0:r.email)||""})]})]}),e.jsx($,{edge:"end",color:"inherit",onClick:s,"aria-label":"close drawer",sx:{minWidth:44,minHeight:44},children:e.jsx(_,{})})]}),e.jsx(b,{}),e.jsx(I,{sx:{flex:1,py:1},children:g.map(o=>e.jsxs(y.Fragment,{children:[e.jsx(w,{disablePadding:!0,children:e.jsxs(C,{selected:l(o.route),onClick:()=>h(o.route),sx:{minHeight:48,px:2.5,"&.Mui-selected":{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"},"& .MuiListItemIcon-root":{color:"primary.contrastText"}}},children:[e.jsx(S,{sx:{minWidth:40,color:l(o.route)?"primary.contrastText":"text.secondary"},children:o.icon}),e.jsx(k,{primary:o.label,primaryTypographyProps:{fontSize:"0.95rem",fontWeight:l(o.route)?600:400}})]})}),o.dividerAfter&&e.jsx(b,{sx:{my:1}})]},o.id))}),e.jsx(b,{}),e.jsx(I,{sx:{py:1},children:e.jsx(w,{disablePadding:!0,children:e.jsxs(C,{onClick:t,sx:{minHeight:48,px:2.5,color:"error.main"},children:[e.jsx(S,{sx:{minWidth:40,color:"error.main"},children:e.jsx(K,{})}),e.jsx(k,{primary:"Logout",primaryTypographyProps:{fontSize:"0.95rem",fontWeight:500}})]})})})]})},ce=({children:p,hideBottomNav:s=!1,hideTopBar:d=!1,pageTitle:i="Sacred Sutra Tools",showBackButton:x=!1,onBackClick:n,topBarActions:r})=>{const g=oe(),h=v(),[t,l]=Z.useState(!1),c=64,o=()=>{l(!0)},a=()=>{l(!1)},m=()=>{n?n():h(-1)},f=async()=>{try{await g(te()).unwrap(),h("/")}catch(B){console.error("Logout failed:",B)}};return e.jsxs(u,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",width:"100vw",maxWidth:"100%",backgroundColor:"background.default"},children:[!d&&e.jsx(ae,{title:i,showBackButton:x,onMenuClick:o,onBackClick:m,actions:r}),e.jsx(se,{open:t,onClose:a,onLogout:f}),e.jsx(u,{component:"main",sx:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",WebkitOverflowScrolling:"touch",paddingBottom:s?0:`${c}px`},children:p}),!s&&e.jsx(re,{})]})};export{ce as M};
