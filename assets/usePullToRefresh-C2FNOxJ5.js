import{a as t}from"./react-vendor-C0s_J9t-.js";function L(s,a={}){const{threshold:c=80,maxPullDistance:R=120,enabled:r=!0,resistance:v=2.5}=a,n=t.useRef(null),[o,u]=t.useState({pullDistance:0,isPulling:!1,isRefreshing:!1,progress:0,shouldRefresh:!1}),l=t.useRef(0),i=t.useRef(0),f=t.useCallback(()=>{u(e=>({...e,pullDistance:0,isPulling:!1,shouldRefresh:!1,progress:0}))},[]),h=t.useCallback(e=>{if(!r||!n.current)return;const m=n.current;i.current=m.scrollTop,i.current===0&&(l.current=e.touches[0].clientY)},[r]),d=t.useCallback(e=>{if(!r||!n.current||l.current===0)return;const P=e.touches[0].clientY-l.current;if(i.current===0&&P>0){e.preventDefault();const p=Math.min(P/v,R),E=Math.min(p/c*100,100),T=p>=c;u({pullDistance:p,isPulling:!0,isRefreshing:!1,progress:E,shouldRefresh:T})}},[r,c,R,v]),g=t.useCallback(async()=>{if(!r||!o.isPulling){f();return}if(l.current=0,o.shouldRefresh){u(e=>({...e,isRefreshing:!0,isPulling:!1}));try{await s()}catch(e){console.error("Pull-to-refresh error:",e)}finally{u({pullDistance:0,isPulling:!1,isRefreshing:!1,progress:0,shouldRefresh:!1})}}else f()},[r,o.isPulling,o.shouldRefresh,s,f]);return t.useEffect(()=>{const e=n.current;if(!(!e||!r))return e.addEventListener("touchstart",h,{passive:!0}),e.addEventListener("touchmove",d,{passive:!1}),e.addEventListener("touchend",g,{passive:!0}),()=>{e.removeEventListener("touchstart",h),e.removeEventListener("touchmove",d),e.removeEventListener("touchend",g)}},[r,h,d,g]),{state:o,containerRef:n}}function b(s){return{transform:`translateY(${s}px)`,transition:s===0?"transform 0.3s ease":"none",opacity:Math.min(s/60,1)}}function y(s,a){return a?180:s*1.8}export{y as a,b as g,L as u};
